{"ast":null,"code":"import _objectSpread from\"C:/Users/lab_services_student/Documents/INSY7314_T2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";//const API_BASE = process.env.REACT_APP_API_BASE || \"https://localhost:3000/api\";\nconst API_BASE=process.env.REACT_APP_API_BASE||\"http://localhost:3000/api\";async function request(path){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=\"\".concat(API_BASE).concat(path);const defaultHeaders={\"Content-Type\":\"application/json\"};options.headers=_objectSpread(_objectSpread({},options.headers||{}),defaultHeaders);if(options.body&&typeof options.body!==\"string\"){options.body=JSON.stringify(options.body);}const res=await fetch(url,options);const text=await res.text();try{const json=text?JSON.parse(text):{};if(!res.ok)throw{status:res.status,body:json};return json;}catch(e){if(e&&e.status)throw e;// non-json response\nif(!res.ok)throw{status:res.status,body:text};return text;}}export default{post:(path,body,token)=>request(path,{method:\"POST\",body,headers:token?{Authorization:\"Bearer \".concat(token)}:{}}),get:(path,token)=>request(path,{method:\"GET\",headers:token?{Authorization:\"Bearer \".concat(token)}:{}})};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","request","path","options","arguments","length","undefined","url","concat","defaultHeaders","headers","_objectSpread","body","JSON","stringify","res","fetch","text","json","parse","ok","status","e","post","token","method","Authorization","get"],"sources":["C:/Users/lab_services_student/Documents/INSY7314_T2/frontend/src/api.js"],"sourcesContent":["//const API_BASE = process.env.REACT_APP_API_BASE || \"https://localhost:3000/api\";\r\n\r\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:3000/api\";\r\n\r\nasync function request(path, options = {}) {\r\n  const url = `${API_BASE}${path}`;\r\n  const defaultHeaders = { \"Content-Type\": \"application/json\" };\r\n  options.headers = { ...(options.headers || {}), ...defaultHeaders };\r\n  if (options.body && typeof options.body !== \"string\") {\r\n    options.body = JSON.stringify(options.body);\r\n  }\r\n  const res = await fetch(url, options);\r\n  const text = await res.text();\r\n  try {\r\n    const json = text ? JSON.parse(text) : {};\r\n    if (!res.ok) throw { status: res.status, body: json };\r\n    return json;\r\n  } catch (e) {\r\n    if (e && e.status) throw e;\r\n    // non-json response\r\n    if (!res.ok) throw { status: res.status, body: text };\r\n    return text;\r\n  }\r\n}\r\n\r\nexport default {\r\n  post: (path, body, token) =>\r\n    request(path, { method: \"POST\", body, headers: token ? { Authorization: `Bearer ${token}` } : {} }),\r\n  get: (path, token) =>\r\n    request(path, { method: \"GET\", headers: token ? { Authorization: `Bearer ${token}` } : {} }),\r\n};\r\n"],"mappings":"iJAAA;AAEA,KAAM,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAI,2BAA2B,CAE9E,cAAe,CAAAC,OAAOA,CAACC,IAAI,CAAgB,IAAd,CAAAC,OAAO,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CACvC,KAAM,CAAAG,GAAG,IAAAC,MAAA,CAAMX,QAAQ,EAAAW,MAAA,CAAGN,IAAI,CAAE,CAChC,KAAM,CAAAO,cAAc,CAAG,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC7DN,OAAO,CAACO,OAAO,CAAAC,aAAA,CAAAA,aAAA,IAASR,OAAO,CAACO,OAAO,EAAI,CAAC,CAAC,EAAMD,cAAc,CAAE,CACnE,GAAIN,OAAO,CAACS,IAAI,EAAI,MAAO,CAAAT,OAAO,CAACS,IAAI,GAAK,QAAQ,CAAE,CACpDT,OAAO,CAACS,IAAI,CAAGC,IAAI,CAACC,SAAS,CAACX,OAAO,CAACS,IAAI,CAAC,CAC7C,CACA,KAAM,CAAAG,GAAG,CAAG,KAAM,CAAAC,KAAK,CAACT,GAAG,CAAEJ,OAAO,CAAC,CACrC,KAAM,CAAAc,IAAI,CAAG,KAAM,CAAAF,GAAG,CAACE,IAAI,CAAC,CAAC,CAC7B,GAAI,CACF,KAAM,CAAAC,IAAI,CAAGD,IAAI,CAAGJ,IAAI,CAACM,KAAK,CAACF,IAAI,CAAC,CAAG,CAAC,CAAC,CACzC,GAAI,CAACF,GAAG,CAACK,EAAE,CAAE,KAAM,CAAEC,MAAM,CAAEN,GAAG,CAACM,MAAM,CAAET,IAAI,CAAEM,IAAK,CAAC,CACrD,MAAO,CAAAA,IAAI,CACb,CAAE,MAAOI,CAAC,CAAE,CACV,GAAIA,CAAC,EAAIA,CAAC,CAACD,MAAM,CAAE,KAAM,CAAAC,CAAC,CAC1B;AACA,GAAI,CAACP,GAAG,CAACK,EAAE,CAAE,KAAM,CAAEC,MAAM,CAAEN,GAAG,CAACM,MAAM,CAAET,IAAI,CAAEK,IAAK,CAAC,CACrD,MAAO,CAAAA,IAAI,CACb,CACF,CAEA,cAAe,CACbM,IAAI,CAAEA,CAACrB,IAAI,CAAEU,IAAI,CAAEY,KAAK,GACtBvB,OAAO,CAACC,IAAI,CAAE,CAAEuB,MAAM,CAAE,MAAM,CAAEb,IAAI,CAAEF,OAAO,CAAEc,KAAK,CAAG,CAAEE,aAAa,WAAAlB,MAAA,CAAYgB,KAAK,CAAG,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,CACrGG,GAAG,CAAEA,CAACzB,IAAI,CAAEsB,KAAK,GACfvB,OAAO,CAACC,IAAI,CAAE,CAAEuB,MAAM,CAAE,KAAK,CAAEf,OAAO,CAAEc,KAAK,CAAG,CAAEE,aAAa,WAAAlB,MAAA,CAAYgB,KAAK,CAAG,CAAC,CAAG,CAAC,CAAE,CAAC,CAC/F,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}