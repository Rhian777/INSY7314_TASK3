{"ast":null,"code":"//const API_BASE = process.env.REACT_APP_API_BASE || \"https://localhost:3000/api\";\n\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:3000/api\";\nasync function request(path, options = {}) {\n  const url = `${API_BASE}${path}`;\n  const defaultHeaders = {\n    \"Content-Type\": \"application/json\"\n  };\n  options.headers = {\n    ...(options.headers || {}),\n    ...defaultHeaders\n  };\n  if (options.body && typeof options.body !== \"string\") {\n    options.body = JSON.stringify(options.body);\n  }\n  const res = await fetch(url, options);\n  const text = await res.text();\n  try {\n    const json = text ? JSON.parse(text) : {};\n    if (!res.ok) throw {\n      status: res.status,\n      body: json\n    };\n    return json;\n  } catch (e) {\n    if (e && e.status) throw e;\n    // non-json response\n    if (!res.ok) throw {\n      status: res.status,\n      body: text\n    };\n    return text;\n  }\n}\nexport default {\n  post: (path, body, token) => request(path, {\n    method: \"POST\",\n    body,\n    headers: token ? {\n      Authorization: `Bearer ${token}`\n    } : {}\n  }),\n  get: (path, token) => request(path, {\n    method: \"GET\",\n    headers: token ? {\n      Authorization: `Bearer ${token}`\n    } : {}\n  })\n};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","request","path","options","url","defaultHeaders","headers","body","JSON","stringify","res","fetch","text","json","parse","ok","status","e","post","token","method","Authorization","get"],"sources":["C:/Users/lab_services_student/Documents/INSY7314_T2/frontend/src/api.js"],"sourcesContent":["//const API_BASE = process.env.REACT_APP_API_BASE || \"https://localhost:3000/api\";\r\n\r\nconst API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:3000/api\";\r\n\r\nasync function request(path, options = {}) {\r\n  const url = `${API_BASE}${path}`;\r\n  const defaultHeaders = { \"Content-Type\": \"application/json\" };\r\n  options.headers = { ...(options.headers || {}), ...defaultHeaders };\r\n  if (options.body && typeof options.body !== \"string\") {\r\n    options.body = JSON.stringify(options.body);\r\n  }\r\n  const res = await fetch(url, options);\r\n  const text = await res.text();\r\n  try {\r\n    const json = text ? JSON.parse(text) : {};\r\n    if (!res.ok) throw { status: res.status, body: json };\r\n    return json;\r\n  } catch (e) {\r\n    if (e && e.status) throw e;\r\n    // non-json response\r\n    if (!res.ok) throw { status: res.status, body: text };\r\n    return text;\r\n  }\r\n}\r\n\r\nexport default {\r\n  post: (path, body, token) =>\r\n    request(path, { method: \"POST\", body, headers: token ? { Authorization: `Bearer ${token}` } : {} }),\r\n  get: (path, token) =>\r\n    request(path, { method: \"GET\", headers: token ? { Authorization: `Bearer ${token}` } : {} }),\r\n};\r\n"],"mappings":"AAAA;;AAEA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,2BAA2B;AAE9E,eAAeC,OAAOA,CAACC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACzC,MAAMC,GAAG,GAAG,GAAGP,QAAQ,GAAGK,IAAI,EAAE;EAChC,MAAMG,cAAc,GAAG;IAAE,cAAc,EAAE;EAAmB,CAAC;EAC7DF,OAAO,CAACG,OAAO,GAAG;IAAE,IAAIH,OAAO,CAACG,OAAO,IAAI,CAAC,CAAC,CAAC;IAAE,GAAGD;EAAe,CAAC;EACnE,IAAIF,OAAO,CAACI,IAAI,IAAI,OAAOJ,OAAO,CAACI,IAAI,KAAK,QAAQ,EAAE;IACpDJ,OAAO,CAACI,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACN,OAAO,CAACI,IAAI,CAAC;EAC7C;EACA,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAACP,GAAG,EAAED,OAAO,CAAC;EACrC,MAAMS,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,CAAC,CAAC;EAC7B,IAAI;IACF,MAAMC,IAAI,GAAGD,IAAI,GAAGJ,IAAI,CAACM,KAAK,CAACF,IAAI,CAAC,GAAG,CAAC,CAAC;IACzC,IAAI,CAACF,GAAG,CAACK,EAAE,EAAE,MAAM;MAAEC,MAAM,EAAEN,GAAG,CAACM,MAAM;MAAET,IAAI,EAAEM;IAAK,CAAC;IACrD,OAAOA,IAAI;EACb,CAAC,CAAC,OAAOI,CAAC,EAAE;IACV,IAAIA,CAAC,IAAIA,CAAC,CAACD,MAAM,EAAE,MAAMC,CAAC;IAC1B;IACA,IAAI,CAACP,GAAG,CAACK,EAAE,EAAE,MAAM;MAAEC,MAAM,EAAEN,GAAG,CAACM,MAAM;MAAET,IAAI,EAAEK;IAAK,CAAC;IACrD,OAAOA,IAAI;EACb;AACF;AAEA,eAAe;EACbM,IAAI,EAAEA,CAAChB,IAAI,EAAEK,IAAI,EAAEY,KAAK,KACtBlB,OAAO,CAACC,IAAI,EAAE;IAAEkB,MAAM,EAAE,MAAM;IAAEb,IAAI;IAAED,OAAO,EAAEa,KAAK,GAAG;MAAEE,aAAa,EAAE,UAAUF,KAAK;IAAG,CAAC,GAAG,CAAC;EAAE,CAAC,CAAC;EACrGG,GAAG,EAAEA,CAACpB,IAAI,EAAEiB,KAAK,KACflB,OAAO,CAACC,IAAI,EAAE;IAAEkB,MAAM,EAAE,KAAK;IAAEd,OAAO,EAAEa,KAAK,GAAG;MAAEE,aAAa,EAAE,UAAUF,KAAK;IAAG,CAAC,GAAG,CAAC;EAAE,CAAC;AAC/F,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}