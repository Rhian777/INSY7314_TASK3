{"ast":null,"code":"import _objectSpread from\"C:/Users/lab_services_student/Documents/INSY7314_T2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import api from\"../api\";import{loadToken}from\"../auth\";import{validatePayment}from\"../utils/validators\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PaymentForm(_ref){let{onCreate}=_ref;const[form,setForm]=useState({amount:\"\",currency:\"ZAR\",provider:\"\",payeeAccount:\"\",swiftCode:\"\"});const[err,setErr]=useState(\"\");const[ok,setOk]=useState(\"\");const onChange=e=>setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));const submit=async ev=>{ev.preventDefault();setErr(\"\");setOk(\"\");const v=validatePayment(form);if(v){setErr(v);return;}try{const res=await api.post(\"/payment/create\",form,loadToken());setOk(\"Payment created (Pending).\");setForm({amount:\"\",currency:\"ZAR\",provider:\"\",payeeAccount:\"\",swiftCode:\"\"});onCreate&&onCreate();}catch(e){var _e$body;setErr(((_e$body=e.body)===null||_e$body===void 0?void 0:_e$body.message)||\"Create payment failed\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create Payment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"input\",{name:\"amount\",value:form.amount,onChange:onChange,type:\"number\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Currency\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"currency\",value:form.currency,onChange:onChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"ZAR\",children:\"ZAR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GBP\",children:\"GBP\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Provider\"}),/*#__PURE__*/_jsx(\"input\",{name:\"provider\",value:form.provider,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payee Account\"}),/*#__PURE__*/_jsx(\"input\",{name:\"payeeAccount\",value:form.payeeAccount,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"SWIFT Code\"}),/*#__PURE__*/_jsx(\"input\",{name:\"swiftCode\",value:form.swiftCode,onChange:onChange})]}),/*#__PURE__*/_jsx(\"button\",{className:\"primary\",type:\"submit\",children:\"Create\"})]}),err&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:err}),ok&&/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:ok})]});}","map":{"version":3,"names":["React","useState","api","loadToken","validatePayment","jsx","_jsx","jsxs","_jsxs","PaymentForm","_ref","onCreate","form","setForm","amount","currency","provider","payeeAccount","swiftCode","err","setErr","ok","setOk","onChange","e","_objectSpread","target","name","value","submit","ev","preventDefault","v","res","post","_e$body","body","message","className","children","onSubmit","type","step"],"sources":["C:/Users/lab_services_student/Documents/INSY7314_T2/frontend/src/components/PaymentForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport api from \"../api\";\r\nimport { loadToken } from \"../auth\";\r\nimport { validatePayment } from \"../utils/validators\";\r\n\r\nexport default function PaymentForm({ onCreate }) {\r\n  const [form, setForm] = useState({ amount: \"\", currency: \"ZAR\", provider: \"\", payeeAccount: \"\", swiftCode: \"\" });\r\n  const [err, setErr] = useState(\"\");\r\n  const [ok, setOk] = useState(\"\");\r\n\r\n  const onChange = e => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const submit = async (ev) => {\r\n    ev.preventDefault();\r\n    setErr(\"\"); setOk(\"\");\r\n    const v = validatePayment(form);\r\n    if (v) { setErr(v); return; }\r\n    try {\r\n      const res = await api.post(\"/payment/create\", form, loadToken());\r\n      setOk(\"Payment created (Pending).\");\r\n      setForm({ amount: \"\", currency: \"ZAR\", provider: \"\", payeeAccount: \"\", swiftCode: \"\" });\r\n      onCreate && onCreate();\r\n    } catch (e) {\r\n      setErr(e.body?.message || \"Create payment failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h3>Create Payment</h3>\r\n      <form onSubmit={submit}>\r\n        <div className=\"form-row\"><label>Amount</label><input name=\"amount\" value={form.amount} onChange={onChange} type=\"number\" step=\"0.01\" /></div>\r\n        <div className=\"form-row\"><label>Currency</label>\r\n          <select name=\"currency\" value={form.currency} onChange={onChange}>\r\n            <option value=\"ZAR\">ZAR</option>\r\n            <option value=\"USD\">USD</option>\r\n            <option value=\"GBP\">GBP</option>\r\n            <option value=\"EUR\">EUR</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"form-row\"><label>Provider</label><input name=\"provider\" value={form.provider} onChange={onChange} /></div>\r\n        <div className=\"form-row\"><label>Payee Account</label><input name=\"payeeAccount\" value={form.payeeAccount} onChange={onChange} /></div>\r\n        <div className=\"form-row\"><label>SWIFT Code</label><input name=\"swiftCode\" value={form.swiftCode} onChange={onChange} /></div>\r\n        <button className=\"primary\" type=\"submit\">Create</button>\r\n      </form>\r\n      {err && <div className=\"error\">{err}</div>}\r\n      {ok && <div className=\"success\">{ok}</div>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}