{"ast":null,"code":"// frontend/src/api.js\n\nconst API_BASE = process.env.REACT_APP_API_BASE || \"https://localhost:5000/api\"; // match your backend port\n\n// Helper to get the stored token (for both users and employees)\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\nasync function request(path, options = {}) {\n  const url = `${API_BASE}${path}`;\n  const defaultHeaders = {\n    \"Content-Type\": \"application/json\"\n  };\n  const token = getToken();\n\n  // Merge headers\n  options.headers = {\n    ...(options.headers || {}),\n    ...defaultHeaders,\n    ...(token ? {\n      Authorization: `Bearer ${token}`\n    } : {})\n  };\n\n  // Convert body to JSON string if needed\n  if (options.body && typeof options.body !== \"string\") {\n    options.body = JSON.stringify(options.body);\n  }\n  const res = await fetch(url, options);\n  const text = await res.text();\n  try {\n    const json = text ? JSON.parse(text) : {};\n    if (!res.ok) throw {\n      status: res.status,\n      body: json\n    };\n    return json;\n  } catch (e) {\n    if (e && e.status) throw e;\n    if (!res.ok) throw {\n      status: res.status,\n      body: text\n    };\n    return text;\n  }\n}\nexport default {\n  get: path => request(path, {\n    method: \"GET\"\n  }),\n  post: (path, body) => request(path, {\n    method: \"POST\",\n    body\n  }),\n  put: (path, body) => request(path, {\n    method: \"PUT\",\n    body\n  }),\n  delete: path => request(path, {\n    method: \"DELETE\"\n  })\n};\n\n/*const API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:5000/api\";\r\n\r\nasync function request(path, options = {}) {\r\n  const url = `${API_BASE}${path}`;\r\n  const defaultHeaders = { \"Content-Type\": \"application/json\" };\r\n  options.headers = { ...(options.headers || {}), ...defaultHeaders };\r\n\r\n  if (options.body && typeof options.body !== \"string\") {\r\n    options.body = JSON.stringify(options.body);\r\n  }\r\n\r\n  const res = await fetch(url, options);\r\n  const text = await res.text();\r\n\r\n  try {\r\n    const json = text ? JSON.parse(text) : {};\r\n    if (!res.ok) throw { status: res.status, body: json };\r\n    return json;\r\n  } catch (e) {\r\n    if (e && e.status) throw e;\r\n    if (!res.ok) throw { status: res.status, body: text };\r\n    return text;\r\n  }\r\n}\r\n\r\nexport default {\r\n  post: (path, body, token) =>\r\n    request(path, {\r\n      method: \"POST\",\r\n      body,\r\n      headers: token ? { Authorization: `Bearer ${token}` } : undefined,\r\n    }),\r\n  get: (path, token) =>\r\n    request(path, { method: \"GET\", headers: token ? { Authorization: `Bearer ${token}` } : undefined }),\r\n};*/","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","getToken","localStorage","getItem","request","path","options","url","defaultHeaders","token","headers","Authorization","body","JSON","stringify","res","fetch","text","json","parse","ok","status","e","get","method","post","put","delete"],"sources":["C:/Users/lab_services_student/Documents/INSY7314_POE_TASK3/frontend/src/api.js"],"sourcesContent":["// frontend/src/api.js\r\n\r\nconst API_BASE =\r\n  process.env.REACT_APP_API_BASE || \"https://localhost:5000/api\"; // match your backend port\r\n\r\n// Helper to get the stored token (for both users and employees)\r\nfunction getToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n\r\nasync function request(path, options = {}) {\r\n  const url = `${API_BASE}${path}`;\r\n  const defaultHeaders = { \"Content-Type\": \"application/json\" };\r\n  const token = getToken();\r\n\r\n  // Merge headers\r\n  options.headers = {\r\n    ...(options.headers || {}),\r\n    ...defaultHeaders,\r\n    ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n  };\r\n\r\n  // Convert body to JSON string if needed\r\n  if (options.body && typeof options.body !== \"string\") {\r\n    options.body = JSON.stringify(options.body);\r\n  }\r\n\r\n  const res = await fetch(url, options);\r\n  const text = await res.text();\r\n\r\n  try {\r\n    const json = text ? JSON.parse(text) : {};\r\n    if (!res.ok) throw { status: res.status, body: json };\r\n    return json;\r\n  } catch (e) {\r\n    if (e && e.status) throw e;\r\n    if (!res.ok) throw { status: res.status, body: text };\r\n    return text;\r\n  }\r\n}\r\n\r\nexport default {\r\n  get: (path) =>\r\n    request(path, {\r\n      method: \"GET\",\r\n    }),\r\n\r\n  post: (path, body) =>\r\n    request(path, {\r\n      method: \"POST\",\r\n      body,\r\n    }),\r\n\r\n  put: (path, body) =>\r\n    request(path, {\r\n      method: \"PUT\",\r\n      body,\r\n    }),\r\n\r\n  delete: (path) =>\r\n    request(path, {\r\n      method: \"DELETE\",\r\n    }),\r\n};\r\n\r\n\r\n/*const API_BASE = process.env.REACT_APP_API_BASE || \"http://localhost:5000/api\";\r\n\r\nasync function request(path, options = {}) {\r\n  const url = `${API_BASE}${path}`;\r\n  const defaultHeaders = { \"Content-Type\": \"application/json\" };\r\n  options.headers = { ...(options.headers || {}), ...defaultHeaders };\r\n\r\n  if (options.body && typeof options.body !== \"string\") {\r\n    options.body = JSON.stringify(options.body);\r\n  }\r\n\r\n  const res = await fetch(url, options);\r\n  const text = await res.text();\r\n\r\n  try {\r\n    const json = text ? JSON.parse(text) : {};\r\n    if (!res.ok) throw { status: res.status, body: json };\r\n    return json;\r\n  } catch (e) {\r\n    if (e && e.status) throw e;\r\n    if (!res.ok) throw { status: res.status, body: text };\r\n    return text;\r\n  }\r\n}\r\n\r\nexport default {\r\n  post: (path, body, token) =>\r\n    request(path, {\r\n      method: \"POST\",\r\n      body,\r\n      headers: token ? { Authorization: `Bearer ${token}` } : undefined,\r\n    }),\r\n  get: (path, token) =>\r\n    request(path, { method: \"GET\", headers: token ? { Authorization: `Bearer ${token}` } : undefined }),\r\n};*/\r\n"],"mappings":"AAAA;;AAEA,MAAMA,QAAQ,GACZC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,4BAA4B,CAAC,CAAC;;AAElE;AACA,SAASC,QAAQA,CAAA,EAAG;EAClB,OAAOC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AACtC;AAEA,eAAeC,OAAOA,CAACC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACzC,MAAMC,GAAG,GAAG,GAAGV,QAAQ,GAAGQ,IAAI,EAAE;EAChC,MAAMG,cAAc,GAAG;IAAE,cAAc,EAAE;EAAmB,CAAC;EAC7D,MAAMC,KAAK,GAAGR,QAAQ,CAAC,CAAC;;EAExB;EACAK,OAAO,CAACI,OAAO,GAAG;IAChB,IAAIJ,OAAO,CAACI,OAAO,IAAI,CAAC,CAAC,CAAC;IAC1B,GAAGF,cAAc;IACjB,IAAIC,KAAK,GAAG;MAAEE,aAAa,EAAE,UAAUF,KAAK;IAAG,CAAC,GAAG,CAAC,CAAC;EACvD,CAAC;;EAED;EACA,IAAIH,OAAO,CAACM,IAAI,IAAI,OAAON,OAAO,CAACM,IAAI,KAAK,QAAQ,EAAE;IACpDN,OAAO,CAACM,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACR,OAAO,CAACM,IAAI,CAAC;EAC7C;EAEA,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAACT,GAAG,EAAED,OAAO,CAAC;EACrC,MAAMW,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,CAAC,CAAC;EAE7B,IAAI;IACF,MAAMC,IAAI,GAAGD,IAAI,GAAGJ,IAAI,CAACM,KAAK,CAACF,IAAI,CAAC,GAAG,CAAC,CAAC;IACzC,IAAI,CAACF,GAAG,CAACK,EAAE,EAAE,MAAM;MAAEC,MAAM,EAAEN,GAAG,CAACM,MAAM;MAAET,IAAI,EAAEM;IAAK,CAAC;IACrD,OAAOA,IAAI;EACb,CAAC,CAAC,OAAOI,CAAC,EAAE;IACV,IAAIA,CAAC,IAAIA,CAAC,CAACD,MAAM,EAAE,MAAMC,CAAC;IAC1B,IAAI,CAACP,GAAG,CAACK,EAAE,EAAE,MAAM;MAAEC,MAAM,EAAEN,GAAG,CAACM,MAAM;MAAET,IAAI,EAAEK;IAAK,CAAC;IACrD,OAAOA,IAAI;EACb;AACF;AAEA,eAAe;EACbM,GAAG,EAAGlB,IAAI,IACRD,OAAO,CAACC,IAAI,EAAE;IACZmB,MAAM,EAAE;EACV,CAAC,CAAC;EAEJC,IAAI,EAAEA,CAACpB,IAAI,EAAEO,IAAI,KACfR,OAAO,CAACC,IAAI,EAAE;IACZmB,MAAM,EAAE,MAAM;IACdZ;EACF,CAAC,CAAC;EAEJc,GAAG,EAAEA,CAACrB,IAAI,EAAEO,IAAI,KACdR,OAAO,CAACC,IAAI,EAAE;IACZmB,MAAM,EAAE,KAAK;IACbZ;EACF,CAAC,CAAC;EAEJe,MAAM,EAAGtB,IAAI,IACXD,OAAO,CAACC,IAAI,EAAE;IACZmB,MAAM,EAAE;EACV,CAAC;AACL,CAAC;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}